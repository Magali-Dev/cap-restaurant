<header class="navbar midnight-background shadow">
    <div class="navbar-container">

        <!-- Burger menu -->
        <button class="burger-menu icon-link smooth-transition box-shadow" id="burgerMenu" aria-label="Ouvrir le menu" aria-expanded="false">
            <div class="burger-line"></div>
            <div class="burger-line"></div>
            <div class="burger-line"></div>
        </button>

        <!-- Navigation principale -->
        <nav class="nav-left">
            <a href="{{ path('app_home') }}" class="title nav-link-box nav-link-fontsize white text-shadow">Accueil</a>
            <a href="{{ path('app_home') }}#galerie" class="title nav-link-box nav-link-fontsize white text-shadow">La carte</a>
            <a href="#" class="title nav-link-box nav-link-fontsize white text-shadow">Événements</a>
            <a href="{{ path('app_home') }}#footer" class="title nav-link-box nav-link-fontsize white text-shadow">Nous contacter</a>
        </nav>

        <!-- Logo -->
        <div class="nav-logo">
            <a href="{{ path('app_home') }}">
                <img src="{{ asset('images/logo-LeCapRistobar.png') }}" alt="Le Cap Ristobar">
            </a>
        </div>

        <!-- Menu utilisateur et panier -->
        <div class="nav-right">
            <a href="#" class="button button-reservation title nav-link-fontsize white box-shadow smooth-transition">Réservation de table</a>
            <a href="#" class="button button-order title nav-link-fontsize box-shadow smooth-transition">Commande en ligne</a>
            <a href="#" class="icon-link smooth-transition box-shadow"><i class="fa-solid fa-user-lock fa-icon fa-xl"></i></a>
            <a href="#" class="icon-link smooth-transition box-shadow"><i class="fas fa-shopping-basket fa-icon fa-xl"></i></a>
        </div>
    </div>

    <!-- Menu mobile -->
    <div class="mobile-menu" id="mobileMenu">
        <button class="close-menu" id="closeMenu" aria-label="Fermer le menu">×</button>

        <a href="{{ path('app_home') }}" class="title nav-link-box nav-link-fontsize">Accueil</a>
        <a href="{{ path('app_home') }}#galerie" class="title nav-link-box nav-link-fontsize">La carte</a>
        <a href="#" class="title nav-link-box nav-link-fontsize">Événements</a>
        <a href="{{ path('app_home') }}#footer" class="title nav-link-box nav-link-fontsize">Nous contacter</a>
        <a href="#" class="button button-reservation title nav-link-fontsize">Réservation de table</a>
        <a href="#" class="button button-order title nav-link-fontsize">Commande en ligne</a>
    </div>

    <div class="menu-overlay" id="menuOverlay"></div>
</header>

<!-- Section bannière -->
<section class="banner-section">
    <img src="{{ asset('images/plat/dessert_figue.jpg') }}" alt="Dessert à la figue par le Restaurant Le Cap Ristobar" class="banner-image">

    <div class="overlay-elements">
        <img src="{{ asset('images/logo-LeCapRistobar.png') }}" alt="Le Cap Ristobar" class="banner-logo">

        <div class="banner-content">
            <span class="banner-tag">Bar</span>
            <img src="{{ asset('images/icons/60x60_gold.svg') }}" alt="•" class="separator-diamond">
            <span class="banner-tag">Restaurant</span>
            <img src="{{ asset('images/icons/60x60_gold.svg') }}" alt="•" class="separator-diamond">
            <span class="banner-tag">Pizzeria</span>
            <img src="{{ asset('images/icons/60x60_gold.svg') }}" alt="•" class="separator-diamond">
            <span class="banner-tag">Événements</span>
        </div>
    </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', () => {
    console.log('DOM prêt ✅');

    const navbar = document.querySelector('header.navbar');
    const banner = document.querySelector('section.banner-section');

    if (!navbar) {
        console.warn('⚠️ Aucun élément <header class="navbar"> trouvé.');
        return;
    }

    // SCROLL
    let ticking = false;

    function handleScroll() {
        if (!ticking) {
            window.requestAnimationFrame(() => {
                const scrollY = window.scrollY;

                if (scrollY > 100) {
                    navbar.classList.add('scrolled');
                    document.body.classList.add('has-scrolled-navbar');
                    if (banner) banner.classList.add('hidden');
                } else {
                    navbar.classList.remove('scrolled');
                    document.body.classList.remove('has-scrolled-navbar');
                    if (banner) banner.classList.remove('hidden');
                }

                ticking = false;
            });
            ticking = true;
        }
    }

    window.addEventListener('scroll', handleScroll);
    handleScroll();

    // MENU BURGER
    const burgerMenu = document.getElementById('burgerMenu');
    const mobileMenu = document.getElementById('mobileMenu');
    const menuOverlay = document.getElementById('menuOverlay');
    const closeMenu = document.getElementById('closeMenu');

    if (burgerMenu && mobileMenu && menuOverlay && closeMenu) {
        const toggleMenu = () => {
            const isActive = burgerMenu.classList.toggle('active');
            mobileMenu.classList.toggle('active', isActive);
            menuOverlay.classList.toggle('active', isActive);
            document.body.style.overflow = isActive ? 'hidden' : '';
        };

        burgerMenu.addEventListener('click', toggleMenu);
        closeMenu.addEventListener('click', toggleMenu);
        menuOverlay.addEventListener('click', toggleMenu);

        mobileMenu.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', toggleMenu);
        });
    } else {
        console.warn('⚠️ Certains éléments du menu burger sont introuvables.');
    }

    // LIENS AVEC ANCRE
    document.querySelectorAll('a[href*="#"]').forEach(link => {
        link.addEventListener('click', function(e) {
            const href = this.getAttribute('href');
            if (href.includes('#') && href !== '#') {
                const targetId = href.split('#')[1];
                const targetElement = document.getElementById(targetId);
                if (targetElement) {
                    e.preventDefault();
                    const navbarHeight = navbar.offsetHeight;
                    const targetPosition = targetElement.offsetTop - navbarHeight;

                    window.scrollTo({
                        top: targetPosition,
                        behavior: 'smooth'
                    });
                }
            }
        });
    });
});
</script>
